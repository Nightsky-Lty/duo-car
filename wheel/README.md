# MilkV Duo 智能小车控制程序

这是一个使用MilkV Duo控制智能小车的示例程序，通过PWM控制电机驱动轮子旋转，实现小车的前进、后退、左转、右转等基本功能。

## 硬件连接

程序假设使用以下引脚连接：

- 左电机控制引脚：
  - 方向控制1: GPIO 2
  - 方向控制2: GPIO 3
  - PWM控制: GPIO 4 (需支持PWM功能)

- 右电机控制引脚：
  - 方向控制1: GPIO 5
  - 方向控制2: GPIO 6
  - PWM控制: GPIO 7 (需支持PWM功能)

> 注意：请根据您的实际硬件连接情况修改`wheel.c`文件中的引脚定义。
> 请确保所选引脚支持PWM功能，可参考MilkV Duo的技术文档。

## 编译步骤

1. 首先，在宿主机上设置开发环境：

```bash
# 在项目根目录下执行
source envsetup.sh
# 按照提示选择您的设备类型(Duo或Duo256M/DuoS)和架构(ARM64或RISCV64)
```

2. 编译程序：

```bash
# 进入wheel目录
cd wheel

# 编译
make
```

3. 将编译好的程序上传到MilkV Duo开发板：

```bash
# 假设MilkV Duo的IP地址为192.168.1.100
scp wheel root@192.168.1.100:/root/
```

## 运行程序

1. 通过SSH登录到MilkV Duo：

```bash
ssh root@192.168.1.100
```

2. 运行程序：

```bash
cd /root
chmod +x wheel
./wheel
```

3. 按照提示输入控制命令：
   - `w`: 前进
   - `s`: 后退
   - `a`: 左转
   - `d`: 右转
   - `x`: 停止
   - `q`: 退出程序

## 注意事项

1. 确保MilkV Duo连接了足够的电源，电机驱动可能需要较大电流。
2. 默认使用半速(PWM占空比500/1000)，可以在代码中修改速度参数。
3. 如遇到引脚功能或电平问题，请参考MilkV Duo官方文档。
4. GPIO默认工作在3.3V电平，如需5V电平，需使用电平转换器。

## 故障排除

1. 如果电机不转动：
   - 检查引脚连接是否正确
   - 确认电机驱动板是否正常工作
   - 验证PWM引脚是否支持PWM功能
   - 检查电源是否足够

2. 如果运动方向相反：
   - 交换对应电机的IN1和IN2连接，或修改代码中的HIGH/LOW设置

3. 如果程序无法编译：
   - 确保开发环境设置正确
   - 检查wiringx库是否安装正确 